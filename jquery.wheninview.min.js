/*!
* jQuery whenInView; version: 1.2.1
* https://github.com/funkhaus/whenInView
* Copyright (c) 2016 Funkhaus; MIT license
*/
!function(a){a.fn.whenInView=function(b,c){var d,e,f=this;if("clear"==b)return f.off(c?c+".wheninview":"enter.wheninview exit.wheninview"),this;"function"==typeof b&&(d=b,b={}),"function"==typeof c&&(e=c);var g=a.extend({className:"element-in-view",container:window,elementIn:null,elementOut:null,topOffset:0,bottomOffset:0,staggerInterval:0,removeWhenOut:!1,RAF:!0},b);g.elementIn=d||g.elementIn||function(){f.each(function(b){var c=a(this);setTimeout(function(){c.hasClass(g.className)||c.addClass(g.className)},b*g.staggerInterval)})},f.on("enter.wheninview",g.elementIn),g.elementOut=e||g.elementOut||function(a){g.removeWhenOut&&a.removeClass(g.className)},f.on("exit.wheninview",g.elementOut);var h=window.innerHeight||document.documentElement.clientHeight,i=a(g.container).scrollTop(),j=!1,k=!1;String(g.topOffset).indexOf("%")>-1&&(j=parseFloat(g.topOffset.replace("%","")/100),g.topOffset=h*j),String(g.bottomOffset).indexOf("%")>-1&&(k=parseFloat(g.bottomOffset.replace("%","")/100),g.bottomOffset=h*k);var l=function(){f.each(function(){rect=this.getBoundingClientRect(),a(this).data("top",rect.top+i),a(this).data("height",rect.height)})};a(window).resize(function(){h=window.innerHeight||document.documentElement.clientHeight,j&&(g.topOffset=h*j),k&&(g.bottomOffset=h*k),l(),window.requestAnimationFrame(m)}),a(document).on("recalculate.wheninview",function(){l(),window.requestAnimationFrame(m)});var m=function(){var b=i+g.topOffset,c=i+h-g.bottomOffset,d=f.filter(function(){var d=a(this).data("top"),e=a(this).data("height");return d+e>b&&d<c&&!this.inView});d.length&&(d.each(function(){this.inView=!0}),d.trigger("enter.wheninview",d));var e=f.filter(function(){var d=a(this).data("top"),e=a(this).data("height");return 1==this.inView&&(d+e<b||d>c)});e.length&&(e.each(function(){this.inView=!1}),e.trigger("exit.wheninview",e))};return a(g.container).scroll(function(){i=a(g.container).scrollTop(),g.RAF?window.requestAnimationFrame(m):m()}),l(),m(),this}}(jQuery);
