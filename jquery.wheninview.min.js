/*!
* jQuery whenInView; version: 1.0 build: 20160327-2
* https://github.com/funkhaus/whenInView
* Copyright (c) 2016 Funkhaus; MIT license
*/
(function($){$.fn.whenInView=function(options,outCb){var inCallback,outCallback,$elems=this;if(typeof options==='function'){inCallback=options;options={};}if(typeof outCb==='function')outCallback=outCb;var settings=$.extend({className:'element-in-view',container:window,elementIn:null,elementOut:null,topOffset:0,bottomOffset:0,staggerInterval:0,removeWhenOut:false,RAF:true},options);settings.elementIn=inCallback||settings.elementIn||function($elems){$elems.each(function(i){var $elem=jQuery(this);setTimeout(function(){if(!$elem.hasClass(settings.className)){$elem.addClass(settings.className);}},i*settings.staggerInterval);});};settings.elementOut=outCallback||settings.elementOut||function($elems){if(settings.removeWhenOut){$elems.removeClass(settings.className);}};var winHeight=window.innerHeight||document.documentElement.clientHeight;var sTop=jQuery(settings.container).scrollTop();var percentOffsetTop=false;var percentOffsetBottom=false;if(String(settings.topOffset).indexOf('%')>-1){percentOffsetTop=parseFloat(settings.topOffset.replace('%','')/100);settings.topOffset=winHeight*percentOffsetTop;}if(String(settings.bottomOffset).indexOf('%')>-1){percentOffsetBottom=parseFloat(settings.bottomOffset.replace('%','')/100);settings.bottomOffset=winHeight*percentOffsetBottom;}var calculateOffsets=function(){$elems.each(function(){rect=this.getBoundingClientRect();$(this).data('top',(rect.top+sTop));$(this).data('height',rect.height);});};$(window).resize(function(){winHeight=window.innerHeight||document.documentElement.clientHeight;if(percentOffsetTop)settings.topOffset=winHeight*percentOffsetTop;if(percentOffsetBottom)settings.bottomOffset=winHeight*percentOffsetBottom;calculateOffsets();window.requestAnimationFrame(checkVisibility);});$(document).on('whenInView-recalculate',function(){calculateOffsets();window.requestAnimationFrame(checkVisibility);});var checkVisibility=function(){var topTrigger=sTop+settings.topOffset;var bottomTrigger=sTop+winHeight-settings.bottomOffset;var $visible=$elems.filter(function(){var elTop=jQuery(this).data('top');var elHeight=jQuery(this).data('height');return(elTop+elHeight)>topTrigger&&elTop<bottomTrigger&&!this.inView;});if($visible.length){$visible.each(function(){this.inView=true;});settings.elementIn($visible);}var $outGoing=$elems.filter(function(){var elTop=jQuery(this).data('top');var elHeight=jQuery(this).data('height');return this.inView==true&&((elTop+elHeight)<topTrigger||elTop>bottomTrigger);});if($outGoing.length){$outGoing.each(function(){this.inView=false;});settings.elementOut($outGoing);}}$(settings.container).scroll(function(){sTop=jQuery(settings.container).scrollTop();if(settings.RAF){window.requestAnimationFrame(checkVisibility);}else{checkVisibility();}});calculateOffsets();checkVisibility();return this;}}(jQuery));