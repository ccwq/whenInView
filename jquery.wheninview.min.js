/*!
* jQuery whenInView; version: 1.2.5
* https://github.com/funkhaus/whenInView
* Copyright (c) 2016 Funkhaus; MIT license
*/
!function(e){e.fn.whenInView=function(t,n){var i,o,r=this;if("clear"==t)return r.off(n?n+".wheninview":"enter.wheninview exit.wheninview"),this;"function"==typeof t&&(i=t,t={}),"function"==typeof n&&(o=n);var a=e.extend({className:"element-in-view",container:window,elementIn:null,elementOut:null,topOffset:0,bottomOffset:0,staggerInterval:0,removeWhenOut:!1,RAF:!0,fireAtStart:!0},t);a.elementIn=i||a.elementIn||function(){e(this).addClass(a.className)},r.on("enter.wheninview",a.elementIn),a.elementOut=o||a.elementOut||function(t){a.removeWhenOut&&(console.log(e(e(t).get(0).target)),e(e(t).get(0).target).removeClass(a.className))},r.on("exit.wheninview",a.elementOut);var f=window.innerHeight||document.documentElement.clientHeight,s=e(a.container).scrollTop(),c=!1,h=!1;String(a.topOffset).indexOf("%")>-1&&(c=parseFloat(a.topOffset.replace("%","")/100),a.topOffset=f*c),String(a.bottomOffset).indexOf("%")>-1&&(h=parseFloat(a.bottomOffset.replace("%","")/100),a.bottomOffset=f*h);var l=function(){r.each(function(){rect=this.getBoundingClientRect(),e(this).data("top",rect.top+s),e(this).data("height",rect.height)})};e(window).resize(function(){f=window.innerHeight||document.documentElement.clientHeight,c&&(a.topOffset=f*c),h&&(a.bottomOffset=f*h),l(),window.requestAnimationFrame(u)}),e(document).on("recalculate.wheninview",function(){l(),window.requestAnimationFrame(u)});var u=function(){var t=s+a.topOffset,n=s+f-a.bottomOffset,i=r.filter(function(){var i=e(this).data("top");return i+e(this).data("height")>t&&i<n&&!this.inView});i.length&&(i.each(function(){this.inView=!0}),i.each(function(t){var n=e(this);a.staggerInterval>0?setTimeout(function(){n.trigger("enter.wheninview",i)},t*a.staggerInterval):n.trigger("enter.wheninview",i)}));var o=r.filter(function(){var i=e(this).data("top"),o=e(this).data("height");return 1==this.inView&&(i+o<t||i>n)});o.length&&(o.each(function(){this.inView=!1}),o.trigger("exit.wheninview",o))};return e(a.container).scroll(function(){s=e(a.container).scrollTop(),a.RAF?window.requestAnimationFrame(u):u()}),l(),a.fireAtStart&&u(),this}}(jQuery);
